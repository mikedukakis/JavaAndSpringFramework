db.createCollection('customers', {validator: {$jsonSchema: {bsonType: 'object',title: 'customers',required: ['customers_id','name','address','tel','email','reg_date'],properties:{customers_id:{bsonType: 'objectId'},name:{bsonType: 'string'},address:{bsonType: 'object',title: 'object',required: ['street','number','town','postcode','country'],properties:{street:{bsonType: 'string'},number:{bsonType: 'int'},floor:{bsonType: 'string'},door:{bsonType: 'string'},town:{bsonType: 'string'},postcode:{bsonType: 'string'},country:{bsonType: 'string'}}},tel:{bsonType: 'string'},email:{bsonType: 'string'},reg_date:{bsonType: 'date'},referrer:{bsonType: 'object',title: 'object',properties:{customers_id:{bsonType: 'string'}}},sale:{bsonType: 'object',title: 'object',required: ['glasses','employee','datetime'],properties:{glasses:{bsonType: 'object',title: 'object',required: ['brand','model','prescription','frame','frame_colour','glass_colour','price','supplier'],properties:{brand:{bsonType: 'string'},model:{bsonType: 'string'},prescription:{bsonType: 'object',title: 'object',required: ['left_eye','right_eye'],properties:{left_eye:{bsonType: 'int'},right_eye:{bsonType: 'int'}}},frame:{bsonType: 'string'},frame_colour:{bsonType: 'string'},glass_colour:{bsonType: 'object',title: 'object',required: ['left_eye','right_eye'],properties:{left_eye:{bsonType: 'string'},right_eye:{bsonType: 'string'}}},price:{bsonType: 'decimal'},supplier:{bsonType: 'object',title: 'object',required: ['name','address','tel','NIF'],properties:{name:{bsonType: 'string'},address:{bsonType: 'object',title: 'object',required: ['street','number','town','postcode','country'],properties:{street:{bsonType: 'string'},number:{bsonType: 'int'},floor:{bsonType: 'string'},door:{bsonType: 'string'},town:{bsonType: 'string'},postcode:{bsonType: 'string'},country:{bsonType: 'string'}}},tel:{bsonType: 'string'},fax:{bsonType: 'string'},NIF:{bsonType: 'string'}}}}},employee:{bsonType: 'object',title: 'object',required: ['name','position'],properties:{name:{bsonType: 'string'},position:{bsonType: 'string'}}},datetime:{bsonType: 'timestamp'}}}}}}});